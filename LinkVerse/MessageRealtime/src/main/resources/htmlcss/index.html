<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Message Realtime</title>
</head>
<body>
<div>
    <h2>Chat</h2>
    <div id="messages"></div>
    <input type="text" id="messageInput" placeholder="Type a message...">
    <button onclick="sendMessage()">Send</button>
</div>

<script>
    const token = 'eyJhbGciOiJIUzUxMiJ9.eyJpc3MiOiJMaW5rVmVyc2UgYnkgTmdvY0R1b25nIiwic3ViIjoiMWY2ZTRkMmUtNTM1NS00ZjI2LThmMjctZjJhMDlkOTVhNmRhIiwiZXhwIjoxNzMxOTg2NzA4LCJpYXQiOjE3MzE5ODMxMDgsImp0aSI6ImU4NDk5MzQ4LTU4MWItNDFmNy1iNmIxLWNmNTViNTlhYmRkZiIsInNjb3BlIjoiUk9MRV9VU0VSIn0.dxWq03dkXXIMhTbZ_mpk9ciMzZxM2VG0_tkQYSsIvEpIiY8NUk8d7D5Tfr38NkZ25lUMu0pRS9KukfR5f20Yuw'; // Replace with actual token
    const socket = new WebSocket(`ws://localhost:8888/api/v1/message?token=${token}`);

    socket.onopen = function (event) {
        console.log('Connected to WebSocket server.');
    };

    socket.onmessage = function (event) {
        const message = JSON.parse(event.data);
        displayMessage(message);
    };

    socket.onclose = function (event) {
        console.log('Disconnected from WebSocket server.');
    };

    socket.onerror = function (error) {
        console.error('WebSocket error:', error);
    };

    function sendMessage() {
        const input = document.getElementById('messageInput');
        const message = {
            sender: '1f6e4d2e-5355-4f26-8f27-f2a09d95a6da', // Replace with actual sender ID
            recipientId: '449846f7-906f-410a-b9a8-3a7cd247e702', // Replace with actual recipient ID or null for group messages
            groupId: null, // Replace with actual group ID if it's a group message
            content: input.value,
            status: 'SENT', // Replace with actual status
            type: 'TEXT' // Replace with actual message type
        };
        socket.send(JSON.stringify(message));
        input.value = '';
    }

    function displayMessage(message) {
        const messagesDiv = document.getElementById('messages');
        const messageElement = document.createElement('div');
        messageElement.textContent = `${message.sender}: ${message.content}`;
        messagesDiv.appendChild(messageElement);
    }
</script>
</body>
</html>